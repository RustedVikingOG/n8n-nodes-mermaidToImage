# COLLABORATION GUIDE: n8n Nodes Starter Project

## Overview

This is an n8n community node starter project that provides a foundation for building custom integrations and nodes for the n8n workflow automation platform. The project includes example nodes, credential types, and the necessary tooling to develop, test, and publish custom n8n nodes as npm packages.

---

## Project Structure & Responsibilities

The project follows n8n's standard node development structure with TypeScript as the primary language:

```
/ (root)
â”œâ”€â”€ package.json - Main package configuration with n8n node definitions and build scripts
â”œâ”€â”€ tsconfig.json - TypeScript compiler configuration for ES2019 target with strict settings
â”œâ”€â”€ gulpfile.js - Build task for copying icons to distribution folder
â”œâ”€â”€ index.js - Package entry point for n8n node registration
â”œâ”€â”€ .eslintrc.js - ESLint configuration for n8n node development standards
â”œâ”€â”€ nodes/ - Custom node implementations directory
â”‚   â”œâ”€â”€ ExampleNode/
â”‚   â”‚   â””â”€â”€ ExampleNode.node.ts - Example node implementation with basic string transformation
â”‚   â””â”€â”€ HttpBin/
â”‚       â”œâ”€â”€ HttpBin.node.ts - HTTP testing node implementation
â”‚       â”œâ”€â”€ HttpBin.node.json - Node configuration and metadata
â”‚       â”œâ”€â”€ httpbin.svg - Node icon asset
â”‚       â””â”€â”€ HttpVerbDescription.ts - HTTP verb descriptions and configurations
â”œâ”€â”€ credentials/ - Authentication credential type definitions
â”‚   â”œâ”€â”€ ExampleCredentialsApi.credentials.ts - Example API credential implementation
â”‚   â””â”€â”€ HttpBinApi.credentials.ts - HttpBin API credential configuration
â””â”€â”€ dist/ - Compiled output directory (generated during build)
```

---

## Key Technologies

- **n8n**: Workflow automation platform requiring custom nodes to be built as npm packages
- **TypeScript**: Strongly-typed JavaScript for node development with strict compiler settings
- **Node.js**: Runtime environment (minimum version 20.15) for development and execution
- **ESLint**: Code linting with n8n-specific rules via eslint-plugin-n8n-nodes-base
- **Gulp**: Build automation for copying static assets (icons) to distribution folder
- **npm**: Package management and publishing platform for n8n community nodes

---

## Project Details: File & Directory Responsibilities

### Node Development

**Project Structure**
- `nodes/`: Contains all custom node implementations as TypeScript classes
- `nodes/*/**.node.ts`: Node implementation files implementing INodeType interface
- `nodes/*/**.node.json`: Optional node configuration and metadata files
- `nodes/*/*.{png,svg}`: Node icon assets that get copied to dist during build

### Credential Management

**Project Structure**
- `credentials/`: Contains credential type definitions for API authentication
- `credentials/*.credentials.ts`: Credential implementations following ICredentialType interface
- Credentials define user input fields for API keys, tokens, or other authentication data

### Build & Distribution

**Project Structure**
- `dist/`: Compiled TypeScript output with processed assets (auto-generated)
- `gulpfile.js`: Handles copying of icon assets from source to distribution
- `package.json`: Defines n8n-specific configuration under "n8n" key with node and credential paths

## Tools

### Tool: n8n CLI

**Requirements**
- Node.js version 20.15 or higher
- Global n8n installation: `npm install n8n -g`
- Local development environment setup as per n8n documentation

**Configurations for n8n CLI**
- `package.json`: Contains n8n-specific configuration under "n8n" key defining node and credential paths
- `.eslintrc.js`: ESLint configuration with n8n-nodes-base plugin for code standards

### Tool: TypeScript Compiler

**Requirements**
- TypeScript globally or locally installed
- Node.js with npm for dependency management

**Configurations for TypeScript**
- `tsconfig.json`: Compiler configuration targeting ES2019 with strict type checking and source maps
- Output directed to `./dist/` directory with declaration files enabled

### Tool: ESLint

**Requirements**
- ESLint with n8n-nodes-base plugin for node-specific linting rules
- TypeScript parser for linting .ts files

**Configurations for ESLint**
- `.eslintrc.js`: Standard ESLint configuration file with n8n-specific rules
- `.eslintrc.prepublish.js`: Stricter linting rules for pre-publish validation

## Setup & Development

### Prerequisites

- Node.js version 20.15 or higher (use nvm for version management)
- git for version control
- Global n8n installation: `npm install n8n -g`
- Recommended: Follow n8n's development environment setup guide

### Install Dependencies

```sh
npm install
```

### Development Workflow

```sh
# Start development with TypeScript watch mode
npm run dev

# Lint code during development
npm run lint

# Auto-fix linting issues
npm run lintfix

# Format code with Prettier
npm run format
```

## Build & Deployment

### Build

Build process compiles TypeScript and processes assets for distribution:

```sh
# Full build (clean, compile TypeScript, copy icons)
npm run build

# Development build with watch mode
npm run dev
```

### Deploy

Publishing to npm registry for n8n community availability:

```sh
# Pre-publish validation (build + strict lint)
npm run prepublishOnly

# Publish to npm (after updating package.json with proper details)
npm publish
```

For n8n cloud availability, submit node for verification through n8n's community node submission process.

## Debugging

### Debugging Strategy: Build error recovery

```sh
# Clean and rebuild from scratch
npx rimraf dist && npm run build

# Check for TypeScript compilation errors
npx tsc --noEmit

# Validate package configuration
npm run lint
```

### Debugging Strategy: Node Testing

```sh
# Test node locally in n8n development environment
n8n start --tunnel

# Run with specific node package during development
npm link
cd /path/to/n8n && npm link n8n-nodes-<your-package>
```

**DEBUGGING: GOTCHAs AND RECOVERY**

- The ERROR: "Unexpected eof" (end of file) | Can typically mean there is a missing or extra bracket/parenthesis. However, can be some times caused by mis-aligned quote types (i.e. opening quote: \' while closing quote '") or additionally by missing tags. Please rewrite the given file to fix the error even if it looks correct. Mistakes happen.
- Node registration errors: Ensure package.json "n8n" configuration correctly references all compiled .js files in dist/
- Icon loading issues: Verify icons are .png or .svg format and properly copied by gulp build task
- TypeScript compilation errors: Check tsconfig.json includes all necessary source directories
- ESLint failures: Use npm run lintfix for auto-fixable issues, manual fixes for n8n-specific rule violations

## Git Commit Best Practices

**Git Commands**

- Use the `git status` command to get a clear view of what you are updating.
- Add and commit your changes with a helpful message using `git add -A && git commit -m '[HELPFUL COMMIT MESSAGE HERE]'`

**Basic Rules**
- Git commits should be a wrapper for related changes. For example, fixing two different bugs should produce two separate commits. 
- Commit Often to keep your commits small to enable better reporting on changes and git history management.
- Don't Commit Half-Done Work, only commit code when a logical component is completed. Split a feature's implementation into logical chunks that can be completed quickly so that you can commit often.
- Test Your Code Before You Commit. Follow the Debugging Strategies.
Resist the temptation to commit something that you Â«thinkÂ» is completed. Test it thoroughly by making sure the code builds.
- Write clear and Good Commit Messages and keep [.docs/CHANGELOG.md] is up to date. Begin your message with a short summary of your changes (up to 50 characters as a guideline). Separate it from the following body by including a blank line. The body of your message should provide detailed answers to the following questions: â€“ What was the motivation for the change? â€“ How does it differ from the previous implementation? Use the imperative, present tense (Â«changeÂ», not Â«changedÂ» or Â«changesÂ») to be consistent with generated messages from commands like git merge.

## Collaboration Tips

- Keep node logic and credential definitions separated for clarity and reusability.
- Use clear commit messages and PR descriptions, especially for node functionality changes.
- Document new nodes, credentials, and configurations in the `.docs/` folder.
- Test nodes thoroughly in local n8n instance before publishing.
- Follow n8n's naming conventions and design patterns for consistency.
- Update package.json version following semantic versioning when publishing updates.
- Update this guide as the project evolves with new nodes or development practices.

## ğŸ”¬ğŸ“š Research

Find all the research docs related to this project in the directory [./.docs/research/].

**â€¼ï¸ Rules**

- âœ… Always provide link or path reference to resources used from this Research. Use Oxford Academic citing style, both inline and as a footnote.
- âœ… Always prefer research notes and documentation provided here over your own knowledge.

**ğŸ“ Notes**

A set of notes, as markdown files of research relating to topics relevant to this project can be found in [./.docs/research/note-*.md]. Reference these to inform implementations related to this project.

**ğŸŒ Confluence Page documents**

Contains a list of relevant [./.docs/research/confluence_pages.md] researched in this project following the template [./.docs/ai/templates/__confluence_pages.md].

**ğŸŒ Web link documents**

Contains a list of relevant [./.docs/research/web_links.md] researched in this project following the template [./.docs/ai/templates/__web_links.md].
